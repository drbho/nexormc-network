<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VortexMC | Portale Ufficiale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .page { display: none; }
        .page.active { display: block; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="bg-[#0f172a] text-slate-200 font-sans min-h-screen">

    <nav id="navbar" class="hidden glass sticky top-0 z-50 px-6 py-4 flex justify-between items-center">
        <div class="text-2xl font-black italic text-indigo-500 tracking-tighter">VORTEX<span class="text-white">MC</span></div>
        <div class="flex items-center gap-6">
            <button onclick="showPage('home')" class="hover:text-white font-medium transition">Home</button>
            <button onclick="showPage('creator')" class="hover:text-white font-medium transition">Candidature</button>
            <div id="staffBadge" class="hidden bg-red-500/20 text-red-500 border border-red-500/50 px-2 py-0.5 rounded text-[10px] font-bold uppercase">Staff Panel</div>
            <button onclick="logout()" class="text-slate-400 hover:text-red-400 text-sm border-l border-slate-700 pl-6 transition">Esci</button>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-6">

        <section id="authPage" class="page active py-12">
            <div class="max-w-md mx-auto glass p-8 rounded-3xl shadow-2xl">
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-black italic text-indigo-500 mb-2">VORTEXMC</h1>
                    <p class="text-slate-400 text-sm">Entra nel portale della community</p>
                </div>

                <div class="flex gap-4 mb-6">
                    <button onclick="toggleAuth('login')" id="btnL" class="flex-1 py-2 rounded-xl bg-indigo-600 font-bold">Login</button>
                    <button onclick="toggleAuth('reg')" id="btnR" class="flex-1 py-2 rounded-xl bg-slate-700 font-bold">Registrati</button>
                </div>

                <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4">
                    <input type="email" id="lEmail" placeholder="Email" class="w-full bg-slate-900/50 border border-slate-700 p-3 rounded-xl focus:border-indigo-500 outline-none" required>
                    <input type="password" id="lPass" placeholder="Password" class="w-full bg-slate-900/50 border border-slate-700 p-3 rounded-xl focus:border-indigo-500 outline-none" required>
                    <button class="w-full bg-indigo-600 hover:bg-indigo-500 py-3 rounded-xl font-bold transition shadow-lg shadow-indigo-500/20">ACCEDI</button>
                </form>

                <form id="regForm" onsubmit="handleRegister(event)" class="hidden space-y-4">
                    <input type="text" id="rName" placeholder="Nome Minecraft" class="w-full bg-slate-900/50 border border-slate-700 p-3 rounded-xl focus:border-indigo-500 outline-none" required>
                    <input type="email" id="rEmail" placeholder="Email" class="w-full bg-slate-900/50 border border-slate-700 p-3 rounded-xl focus:border-indigo-500 outline-none" required>
                    <input type="password" id="rPass" placeholder="Password" class="w-full bg-slate-900/50 border border-slate-700 p-3 rounded-xl focus:border-indigo-500 outline-none" required>
                    <div class="flex items-center gap-2 p-3 bg-slate-900/50 rounded-xl border border-slate-700">
                        <input type="checkbox" id="isStaff" class="w-4 h-4 accent-indigo-500">
                        <label for="isStaff" class="text-sm text-slate-400">Richiedi privilegi Staff</label>
                    </div>
                    <button class="w-full bg-emerald-600 hover:bg-emerald-500 py-3 rounded-xl font-bold transition">CREA ACCOUNT</button>
                </form>
            </div>
        </section>

        <section id="home" class="page">
            <div class="py-10 text-center">
                <h1 class="text-5xl font-black mb-4">BENTORNATO, <span id="userDisp" class="text-indigo-500 uppercase">PLAYER</span>!</h1>
                <p class="text-slate-400 max-w-xl mx-auto">Tutte le informazioni di VortexMC in un unico posto. Seleziona una sezione per iniziare.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <div onclick="showPage('regolamento')" class="glass p-6 rounded-3xl hover:border-indigo-500 transition cursor-pointer group">
                    <h3 class="text-xl font-bold mb-2 group-hover:text-indigo-400 transition">Regolamento</h3>
                    <p class="text-sm text-slate-400">Leggi le norme comportamentali.</p>
                </div>
                <div onclick="showPage('infrazioni')" class="glass p-6 rounded-3xl hover:border-red-500 transition cursor-pointer group">
                    <h3 class="text-xl font-bold mb-2 group-hover:text-red-400 transition">Infrazioni</h3>
                    <p class="text-sm text-slate-400">Scopri le sanzioni del server.</p>
                </div>
                <div onclick="showPage('creator')" class="glass p-6 rounded-3xl hover:border-emerald-500 transition cursor-pointer group">
                    <h3 class="text-xl font-bold mb-2 group-hover:text-emerald-400 transition">Candidature</h3>
                    <p class="text-sm text-slate-400">Diventa parte dei Content Creator.</p>
                </div>
            </div>
        </section>

        <section id="creator" class="page">
            <button onclick="showPage('home')" class="mb-6 text-indigo-400 font-bold">&larr; Indietro</button>
            <div class="glass p-8 rounded-3xl">
                <h2 class="text-3xl font-black mb-6 uppercase">Richiesta Content Creator</h2>
                <form onsubmit="sendToDiscord(event)" class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <label class="block text-xs font-bold text-slate-500 uppercase">1. Ruolo desiderato</label>
                        <select name="q1" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl">
                            <option>YouTuber</option><option>Streamer</option><option>Media</option>
                        </select>
                        <label class="block text-xs font-bold text-slate-500 uppercase">2. Social Link</label>
                        <input type="url" name="q2" placeholder="https://..." class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                        <label class="block text-xs font-bold text-slate-500 uppercase">3. Media Spect/Visual</label>
                        <input type="text" name="q3" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                        <label class="block text-xs font-bold text-slate-500 uppercase">4. Video a settimana</label>
                        <input type="number" name="q4" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                    </div>
                    <div class="space-y-4">
                        <label class="block text-xs font-bold text-slate-500 uppercase">5. Esperienze passate</label>
                        <input type="text" name="q5" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                        <label class="block text-xs font-bold text-slate-500 uppercase">6. Porterai delle serie?</label>
                        <input type="text" name="q6" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                        <label class="block text-xs font-bold text-slate-500 uppercase">7. Frequenza pubblicazione</label>
                        <input type="text" name="q7" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                        <label class="block text-xs font-bold text-slate-500 uppercase">8. Video gi√† fatti su VortexMC</label>
                        <input type="text" name="q8" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl" required>
                    </div>
                    <button class="md:col-span-2 bg-indigo-600 py-4 rounded-xl font-black mt-4 hover:bg-indigo-500 transition shadow-lg shadow-indigo-500/20">INVIA CANDIDATURA</button>
                </form>
            </div>
        </section>

    </main>

    <script>
        const WEBHOOK = "https://discord.com/api/webhooks/1454761434213777470/uPS_4osEXlql2jPDSrf2SYFNvaOTnj3sHuZErHbmfcRHAXOEkRqMsIYyH5YjzV9z4vKq";
        
        // --- LOGICA AUTH & DATABASE LOCALE ---
        const getUsers = () => JSON.parse(localStorage.getItem('vortex_db')) || [];
        const saveUsers = (data) => localStorage.setItem('vortex_db', JSON.stringify(data));

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function toggleAuth(mode) {
            const isL = mode === 'login';
            document.getElementById('loginForm').classList.toggle('hidden', !isL);
            document.getElementById('regForm').classList.toggle('hidden', isL);
            document.getElementById('btnL').className = isL ? 'flex-1 py-2 rounded-xl bg-indigo-600 font-bold' : 'flex-1 py-2 rounded-xl bg-slate-700 font-bold';
            document.getElementById('btnR').className = !isL ? 'flex-1 py-2 rounded-xl bg-indigo-600 font-bold' : 'flex-1 py-2 rounded-xl bg-slate-700 font-bold';
        }

        function handleRegister(e) {
            e.preventDefault();
            const email = document.getElementById('rEmail').value;
            const name = document.getElementById('rName').value;
            const pass = document.getElementById('rPass').value;
            const role = document.getElementById('isStaff').checked ? 'staff' : 'user';

            const db = getUsers();
            if(db.find(u => u.email === email)) return alert("Email gi√† registrata!");

            db.push({ email, name, pass, role });
            saveUsers(db);

            // Simulazione invio email
            alert(`üìß EMAIL INVIATA A: ${email}\nBenvenuto ${name}! Conferma la tua email cliccando sul link simulato.`);
            toggleAuth('login');
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('lEmail').value;
            const pass = document.getElementById('lPass').value;
            const user = getUsers().find(u => u.email === email && u.pass === pass);

            if(user) {
                document.getElementById('navbar').classList.remove('hidden');
                document.getElementById('userDisp').innerText = user.name;
                if(user.role === 'staff') document.getElementById('staffBadge').classList.remove('hidden');
                showPage('home');
            } else {
                alert("Email o Password errati!");
            }
        }

        function logout() {
            location.reload(); // Semplice reset per questo prototipo
        }

        // --- INVIO WEBHOOK ---
        async function sendToDiscord(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const user = document.getElementById('userDisp').innerText;
            
            const fields = [];
            for(let i=1; i<=8; i++) {
                fields.push({ name: `${i}. Domanda`, value: formData.get(`q${i}`) || "N/A" });
            }

            const payload = {
                embeds: [{
                    title: "‚ú® NUOVA CANDIDATURA CREATOR",
                    color: 5814783,
                    description: `Inviata da: **${user}**`,
                    fields: fields,
                    timestamp: new Date()
                }]
            };

            await fetch(WEBHOOK, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });
            alert("Candidatura inviata con successo!");
            showPage('home');
        }
    </script>
</body>
</html>
